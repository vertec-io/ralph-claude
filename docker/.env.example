# ==============================================================================
# Ralph Agent - Docker Environment Variables
# ==============================================================================
# Copy this file to .env and fill in the required values:
#   cp docker/.env.example .env
#
# Then run Ralph with docker-compose:
#   docker-compose up --build
#
# See docs/remote-execution.md for detailed usage instructions.
# ==============================================================================

# ==============================================================================
# API Keys (at least one required, depending on which agent you use)
# ==============================================================================

# Anthropic API Key
# Required for: Claude agent, OpenCode with Anthropic models
# Get yours at: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=

# OpenAI API Key (optional)
# Required for: OpenCode with GPT models
# Get yours at: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# AWS Credentials (optional)
# Required for: OpenCode with Amazon Bedrock models
# See: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1

# Google Cloud Credentials (optional)
# Required for: OpenCode with Vertex AI models
# Path to service account JSON file (must be mounted in container)
# See: https://cloud.google.com/docs/authentication/application-default-credentials
GOOGLE_APPLICATION_CREDENTIALS=

# ==============================================================================
# Project Configuration (used by entrypoint.sh)
# ==============================================================================

# Git URL to clone
# Leave empty to use volume mount instead of cloning
# Examples:
#   https://github.com/your-org/your-repo.git
#   git@github.com:your-org/your-repo.git (requires RALPH_PROJECT_SSH_KEY)
RALPH_PROJECT_GIT_URL=

# Branch to checkout after cloning
# Default: main
RALPH_PROJECT_BRANCH=main

# Commands to run after clone (project setup)
# Examples:
#   npm install
#   npm install && npm run build
#   pip install -r requirements.txt
RALPH_SETUP_COMMANDS=

# SSH Private Key for private repositories
# Only needed for git@ URLs (SSH-based cloning)
# Paste the entire key content here, or base64 encode it for multi-line safety
# Example: cat ~/.ssh/id_rsa | base64 -w0
RALPH_PROJECT_SSH_KEY=

# ==============================================================================
# Ralph Configuration
# ==============================================================================

# Default agent to use
# Options: claude, opencode
# Can be overridden per-task in prd.json or per-story in userStories
# Default: claude
RALPH_AGENT=claude

# Failover threshold
# Number of consecutive agent failures before switching to alternate agent
# Set to 0 to disable failover
# Default: 3
RALPH_FAILOVER_THRESHOLD=3

# ==============================================================================
# OpenCode Server Mode (future feature)
# ==============================================================================
# Enable OpenCode server mode for remote TUI attachment
# When enabled, you can attach from another machine with:
#   opencode attach http://host:port

# Enable server mode
# Default: false
RALPH_OPENCODE_SERVE=false

# OpenCode server port
# Default: 4096
RALPH_OPENCODE_PORT=4096

# ==============================================================================
# Status API (future feature)
# ==============================================================================
# Port for Ralph status HTTP endpoint
# Returns JSON with current task progress information
# Default: 8080
RALPH_STATUS_PORT=8080

# ==============================================================================
# SSH Server Configuration
# ==============================================================================
# SSH server enables remote Claude session attachment.
# Build with ENABLE_SSH=true to include openssh-server:
#   ENABLE_SSH=true docker-compose build
#
# Then connect: ssh -p 2222 ralph@localhost
# And attach:   tmux attach-session -t ralph

# Enable SSH at build time (set before building image)
# Default: false
ENABLE_SSH=false

# SSH authorized keys for remote access
# Paste your public SSH key(s) here - one per line
# Example: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5... user@host
# Get your public key with: cat ~/.ssh/id_ed25519.pub
RALPH_SSH_AUTHORIZED_KEYS=

# SSH port (container internal is always 22, this is the host mapping)
# Default: 2222 (to avoid conflict with host SSH)
RALPH_SSH_PORT=2222

# ==============================================================================
# Advanced Options (uncomment to use)
# ==============================================================================

# User/Group IDs for volume permission compatibility
# Set these to match your host user to avoid permission issues with mounted volumes
# Default: 1001
# USER_UID=1001
# USER_GID=1001
